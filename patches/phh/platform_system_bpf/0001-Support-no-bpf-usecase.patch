From ffe85a3bf530a23ffc2f7a54417fb16e6a644d26 Mon Sep 17 00:00:00 2001
From: xiaoleGun <1592501605@qq.com>
Date: Sun, 6 Feb 2022 18:20:29 +0800
Subject: [PATCH] Support no-bpf usecase

Change-Id: I75a427a2a41aa4ab1104ad88a891bef0dc2d9c91
---
 bpfloader/BpfLoader.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/bpfloader/BpfLoader.cpp b/bpfloader/BpfLoader.cpp
index 3751c58..9682f20 100644
--- a/bpfloader/BpfLoader.cpp
+++ b/bpfloader/BpfLoader.cpp
@@ -125,8 +125,8 @@ int main() {
                 ALOGE("If this triggers randomly, you might be hitting some memory allocation "
                       "problems or startup script race.");
                 ALOGE("--- DO NOT EXPECT SYSTEM TO BOOT SUCCESSFULLY ---");
-                sleep(20);
-                return 2;
+                android::base::SetProperty("bpf.progs_loaded", "1");
+                return 0;
             }
         }
     }
-- 
2.32.0 (Apple Git-132)

